{"ast":null,"code":"import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";export const userAuthorLoginThunk=createAsyncThunk('user-author-login',async(userCredObj,thunkApi)=>{try{if(userCredObj.userType==='user'){const res=await axios.post('http://localhost:4000/user-api/login',userCredObj);if(res.data.message==='login success'){localStorage.setItem('token',res.data.token);return res.data;}else{return thunkApi.rejectWithValue(res.data.message);}}else{const res=await axios.post(\" http://localhost:4000/author-api/login\",userCredObj);if(res.data.message==='login success'){localStorage.setItem('token',res.data.token);return res.data;}else{return thunkApi.rejectWithValue(res.data.message);}}}catch(err){return thunkApi.rejectWithValue(err);}});export const userAuthorSlice=createSlice({name:\"user-author-login\",initialState:{isPending:false,loginUserStatus:false,currentUser:{},errorOccured:false,errMsg:''},reducers:{resetState:(state,action)=>{state.isPending=false;state.loginUserStatus=false;state.currentUser={};state.errorOccured=false;state.errMsg='';}},extraReducers:builder=>builder.addCase(userAuthorLoginThunk.pending,(state,action)=>{state.isPending=true;}).addCase(userAuthorLoginThunk.fulfilled,(state,action)=>{state.isPending=false;state.currentUser=action.payload.user;state.loginUserStatus=true;state.errMsg='';state.errorOccured=false;}).addCase(userAuthorLoginThunk.rejected,(state,action)=>{state.isPending=false;state.currentUser={};state.loginUserStatus=false;state.errMsg=action.payload;state.errorOccured=true;})});export const{resetState}=userAuthorSlice.actions;export default userAuthorSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","userAuthorLoginThunk","userCredObj","thunkApi","userType","res","post","data","message","localStorage","setItem","token","rejectWithValue","err","userAuthorSlice","name","initialState","isPending","loginUserStatus","currentUser","errorOccured","errMsg","reducers","resetState","state","action","extraReducers","builder","addCase","pending","fulfilled","payload","user","rejected","actions","reducer"],"sources":["D:/blogg/blogapp/client/src/redux/slices/userauthorslice.js"],"sourcesContent":["import { createSlice,createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\n\nexport const userAuthorLoginThunk =createAsyncThunk('user-author-login',async(userCredObj,thunkApi)=>{\n    try{\n    if (userCredObj.userType==='user'){\n\n        const res=await axios.post('http://localhost:4000/user-api/login',userCredObj)\n        if (res.data.message ==='login success'){\n            localStorage.setItem('token',res.data.token)\n            return res.data\n\n        }else{\n            return thunkApi.rejectWithValue(res.data.message)\n        }\n    }else{\n        const res=await axios.post(\" http://localhost:4000/author-api/login\",userCredObj)\n        if (res.data.message === 'login success'){\n            localStorage.setItem('token',res.data.token)\n            return res.data\n\n        }else{\n            return thunkApi.rejectWithValue(res.data.message)\n        }\n    }\n}catch(err){\n        return thunkApi.rejectWithValue(err)\n    }\n\n})\n\nexport  const userAuthorSlice=createSlice({\n    name:\"user-author-login\",\n    initialState:{\n        isPending:false,\n        loginUserStatus:false,\n        currentUser:{},\n        errorOccured:false,\n        errMsg:''\n    },\n    reducers:{\n        resetState:(state,action)=>{\n            state.isPending=false;\n            state.loginUserStatus=false;\n            state.currentUser={};\n            state.errorOccured=false;\n            state.errMsg=''\n        }\n    },\n    extraReducers: (builder)=>builder\n    .addCase(userAuthorLoginThunk.pending,(state,action)=>{\n        state.isPending=true;\n    })\n    .addCase(userAuthorLoginThunk.fulfilled,(state,action)=>{\n        state.isPending=false;\n        state.currentUser=action.payload.user;\n        state.loginUserStatus=true;\n        state.errMsg='';\n        state.errorOccured=false;\n    })\n    .addCase(userAuthorLoginThunk.rejected,(state,action)=>{\n        state.isPending=false;\n        state.currentUser={};\n        state.loginUserStatus=false;\n        state.errMsg=action.payload;\n        state.errorOccured=true;\n    })\n\n});\n\nexport const {resetState}=userAuthorSlice.actions;\n\nexport default userAuthorSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}